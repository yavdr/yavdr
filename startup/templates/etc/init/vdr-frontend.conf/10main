# yavdr-frontend - Starts xine or vdr-sxfe
#

description     "yavdr-frontend"
author          "Gerald Dachs <gda@dachsweb.de>"

start on started nodm
<?cs if:(!?vdr.frontend || vdr.frontend != "headless") ?> 
respawn

script
  FRONTEND="/usr/bin/start-xineliboutput"
  if [ "$(dbget vdr.frontend)" = "xineliboutput" ]; then
    FRONTEND="/usr/bin/start-xineliboutput"
  elif [ "$(dbget vdr.frontend)" = "xbmc" ]; then
    FRONTEND="start-xbmc-frontend"
  fi


  su -c "$FRONTEND" vdr
end script
<?cs else ?>
script
    echo "headless yaVDR Server"
end script
<?cs /if ?>
