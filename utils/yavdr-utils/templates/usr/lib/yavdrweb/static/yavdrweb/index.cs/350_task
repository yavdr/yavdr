<script>
var taskRunner = null;
check = function() {
    Ext.Ajax.request({
        url: 'get_time',
        timeout: 1000,
        method: 'GET',
        offline: false,
        success: function(xhr) {
    		var data = Ext.util.JSON.decode( xhr.responseText );
    		if (taskRunner.offline) {
    			taskRunner.interval = 5000;
        		taskRunner.offline = false;
        		Ext.getCmp('webfrontend').enable();
        	}
        },
        failure: function(xhr) {
        	//Ext.TaskMgr.stop(taskRunner);
        	if (!taskRunner.offline) {
            	taskRunner.interval = 15000;
        		taskRunner.offline = true;
        		alert('VDR seams to be switched off or webserver is stopped.');
        		Ext.getCmp('webfrontend').disable();
        	}
        }
    });
} 

Ext.onReady(function() {
    // equivalent using TaskMgr
	taskRunner = Ext.TaskMgr.start({
        run: check,
        interval: 5000,
        offline: false
    });
});
</script>