<?cs if:system.sleep.module == "kernel" ?>
case $1 in
     hibernate|suspend)
         echo "vdr is going to sleep"
	 stop openbox
	 start x
         ;;
     thaw|resume)
         echo "vdr gets started again"
         start vdr
	 stop x
	 start openbox
         for INTERFACE in `ifquery --list`; do restart network-interface INTERFACE=$INTERFACE ; done
         ;;
     *)  echo "Irgendwer ruft mich total falsch auf."
         ;;
esac
<?cs /if ?>
<?cs if:system.sleep.module == "uswsusp" ?>
case $1 in
     hibernate|suspend)
         echo "vdr is going to sleep"
         stop vdr-frontend
         for dev in `find /dev/dvb/adapter?/frontend?` ; do svdrpsend plug dynamite DETD $dev ; done
         dvb-driver --unload
         ;;
     thaw|resume)
         # reload dvb-driver at resume
         for dev in `dvb-driver --load 2> /dev/null` ; do svdrpsend plug dynamite ATTD $dev ; done
         start logo-start
         for INTERFACE in `ifquery --list`; do restart network-interface INTERFACE=$INTERFACE ; done
         start vdr-frontend
         svdrpsend hitk ok
         ;;
     *)  echo "Irgendwer ruft mich total falsch auf."
         ;;
esac
<?cs /if ?>
